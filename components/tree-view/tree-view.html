<ul>
    <li *ng-for="#dir of directories">

        <span><input type="checkbox" [checked]="dir.checked" (click)="dir.check()" /></span> <span (click)="dir.toggle()">{{ dir.name }}</span>

        <div *ng-if="dir.expanded">

            <ul *ng-for="#file of dir.files">
                {{file}}
            </ul>

            <tree-view [directories]="dir.directories"></tree-view>

        </div>

    </li>
</ul>